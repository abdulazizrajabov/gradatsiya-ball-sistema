# API-документация

## Содержание

1. [Введение](#введение)
2. [Аутентификация и Авторизация](#аутентификация-и-авторизация)
3. [Ресурсы API](#ресурсы-api)
    - [Пользователи (Students и Teachers)](#пользователи-students-и-teachers)
    - [Классы (Classes)](#классы-classes)
    - [Награды (Rewards)](#награды-rewards)
    - [История (History)](#история-history)
    - [Магазин (Store)](#магазин-store)
4. [Ошибки](#ошибки)
5. [Примеры Запросов и Ответов](#примеры-запросов-и-ответов)
6. [Рекомендации](#рекомендации)
7. [Заключение](#заключение)

---

## Введение

Этот документ описывает RESTful API вашего проекта системы управления баллами для образовательных учреждений. API позволяет администраторам и учителям управлять пользователями (учениками и учителями), классами, наградами, историей транзакций и магазином. Взаимодействие с API осуществляется через стандартные HTTP-запросы.

## Аутентификация и Авторизация

### Аутентификация

API использует **JWT (JSON Web Tokens)** для аутентификации пользователей. После успешного входа пользователю выдается токен, который должен передаваться в заголовке `Authorization` каждого запроса, требующего аутентификации.

**Заголовок:**

```
Authorization: Bearer <JWT_Token>
```

### Авторизация

Существуют различные уровни доступа для **администраторов** и **учителей**. Некоторые действия доступны только администраторам, например, добавление/удаление классов и пользователей. Другие действия могут быть доступны учителям, такие как просмотр истории или управление наградами.

---

## Ресурсы API

### Пользователи (Students и Teachers)

#### 1. Создание пользователя

- **URL:** `/users`
- **Метод:** `POST`
- **Описание:** Создает нового пользователя (ученика или учителя).
- **Параметры запроса:**
    - `telegram_id` (integer, обязательный): Уникальный Telegram ID пользователя.
    - `full_name` (string, обязательный): Полное имя пользователя.
    - `role` (string, обязательный): Роль пользователя (`student` или `teacher`).
    - `class_id` (integer, необязательный): ID класса (только для учеников).
- **Тело запроса (JSON):**

    ```json
    {
        "telegram_id": 123456789,
        "full_name": "Иван Иванов",
        "role": "student",
        "class_id": 1
    }
    ```

- **Ответ:**
    - **Успех (201 Created):**

        ```json
        {
            "id": 1,
            "telegram_id": 123456789,
            "full_name": "Иван Иванов",
            "role": "student",
            "class_id": 1,
            "total_points": 0,
            "createdAt": "2025-01-04T12:00:00.000Z",
            "updatedAt": "2025-01-04T12:00:00.000Z"
        }
        ```

    - **Ошибка (400 Bad Request):**

        ```json
        {
            "error": "Параметр 'role' должен быть либо 'student', либо 'teacher'."
        }
        ```

#### 2. Получение списка пользователей

- **URL:** `/users`
- **Метод:** `GET`
- **Описание:** Возвращает список всех пользователей. Можно фильтровать по роли.
- **Параметры запроса:**
    - `role` (string, необязательный): Фильтр по роли (`student` или `teacher`).
- **Пример запроса:**

    ```
    GET /users?role=student
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        [
            {
                "id": 1,
                "telegram_id": 123456789,
                "full_name": "Иван Иванов",
                "role": "student",
                "class_id": 1,
                "total_points": 100,
                "createdAt": "2025-01-04T12:00:00.000Z",
                "updatedAt": "2025-01-04T12:30:00.000Z"
            },
            {
                "id": 2,
                "telegram_id": 987654321,
                "full_name": "Мария Петрова",
                "role": "teacher",
                "class_id": null,
                "total_points": null,
                "createdAt": "2025-01-04T13:00:00.000Z",
                "updatedAt": "2025-01-04T13:00:00.000Z"
            }
        ]
        ```

#### 3. Получение пользователя по ID

- **URL:** `/users/{id}`
- **Метод:** `GET`
- **Описание:** Возвращает информацию о пользователе по его ID.
- **Параметры пути:**
    - `id` (integer, обязательный): ID пользователя.
- **Пример запроса:**

    ```
    GET /users/1
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "id": 1,
            "telegram_id": 123456789,
            "full_name": "Иван Иванов",
            "role": "student",
            "class_id": 1,
            "total_points": 100,
            "createdAt": "2025-01-04T12:00:00.000Z",
            "updatedAt": "2025-01-04T12:30:00.000Z"
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Пользователь с ID 1 не найден."
        }
        ```

#### 4. Обновление пользователя

- **URL:** `/users/{id}`
- **Метод:** `PUT`
- **Описание:** Обновляет информацию о пользователе.
- **Параметры пути:**
    - `id` (integer, обязательный): ID пользователя.
- **Параметры запроса:**
    - `full_name` (string, необязательный): Новое полное имя.
    - `role` (string, необязательный): Новая роль (`student` или `teacher`).
    - `class_id` (integer, необязательный): Новый ID класса (только для учеников).
- **Тело запроса (JSON):**

    ```json
    {
        "full_name": "Иван Сергеевич Иванов",
        "role": "student",
        "class_id": 2
    }
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "id": 1,
            "telegram_id": 123456789,
            "full_name": "Иван Сергеевич Иванов",
            "role": "student",
            "class_id": 2,
            "total_points": 150,
            "createdAt": "2025-01-04T12:00:00.000Z",
            "updatedAt": "2025-01-04T14:00:00.000Z"
        }
        ```

    - **Ошибка (400 Bad Request):**

        ```json
        {
            "error": "Недопустимая роль. Роль должна быть 'student' или 'teacher'."
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Пользователь с ID 1 не найден."
        }
        ```

#### 5. Удаление пользователя

- **URL:** `/users/{id}`
- **Метод:** `DELETE`
- **Описание:** Удаляет пользователя по его ID.
- **Параметры пути:**
    - `id` (integer, обязательный): ID пользователя.
- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "message": "Пользователь с ID 1 успешно удален."
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Пользователь с ID 1 не найден."
        }
        ```

---

### Классы (Classes)

#### 1. Создание класса

- **URL:** `/classes`
- **Метод:** `POST`
- **Описание:** Создает новый класс.
- **Параметры запроса:**
    - `name` (string, обязательный): Название класса.
- **Тело запроса (JSON):**

    ```json
    {
        "name": "5-А"
    }
    ```

- **Ответ:**
    - **Успех (201 Created):**

        ```json
        {
            "id": 1,
            "name": "5-А",
            "createdAt": "2025-01-04T15:00:00.000Z",
            "updatedAt": "2025-01-04T15:00:00.000Z"
        }
        ```

    - **Ошибка (400 Bad Request):**

        ```json
        {
            "error": "Название класса не может быть пустым."
        }
        ```

#### 2. Получение списка классов

- **URL:** `/classes`
- **Метод:** `GET`
- **Описание:** Возвращает список всех классов.
- **Ответ:**
    - **Успех (200 OK):**

        ```json
        [
            {
                "id": 1,
                "name": "5-А",
                "createdAt": "2025-01-04T15:00:00.000Z",
                "updatedAt": "2025-01-04T15:00:00.000Z"
            },
            {
                "id": 2,
                "name": "6-Б",
                "createdAt": "2025-01-05T10:00:00.000Z",
                "updatedAt": "2025-01-05T10:00:00.000Z"
            }
        ]
        ```

#### 3. Получение класса по ID

- **URL:** `/classes/{id}`
- **Метод:** `GET`
- **Описание:** Возвращает информацию о классе по его ID.
- **Параметры пути:**
    - `id` (integer, обязательный): ID класса.
- **Пример запроса:**

    ```
    GET /classes/1
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "id": 1,
            "name": "5-А",
            "createdAt": "2025-01-04T15:00:00.000Z",
            "updatedAt": "2025-01-04T15:00:00.000Z"
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Класс с ID 1 не найден."
        }
        ```

#### 4. Обновление класса

- **URL:** `/classes/{id}`
- **Метод:** `PUT`
- **Описание:** Обновляет информацию о классе.
- **Параметры пути:**
    - `id` (integer, обязательный): ID класса.
- **Параметры запроса:**
    - `name` (string, необязательный): Новое название класса.
- **Тело запроса (JSON):**

    ```json
    {
        "name": "5-Б"
    }
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "id": 1,
            "name": "5-Б",
            "createdAt": "2025-01-04T15:00:00.000Z",
            "updatedAt": "2025-01-06T09:00:00.000Z"
        }
        ```

    - **Ошибка (400 Bad Request):**

        ```json
        {
            "error": "Название класса не может быть пустым."
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Класс с ID 1 не найден."
        }
        ```

#### 5. Удаление класса

- **URL:** `/classes/{id}`
- **Метод:** `DELETE`
- **Описание:** Удаляет класс по его ID.
- **Параметры пути:**
    - `id` (integer, обязательный): ID класса.
- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "message": "Класс с ID 1 успешно удален."
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Класс с ID 1 не найден."
        }
        ```

---

### Награды (Rewards)

#### 1. Создание награды

- **URL:** `/rewards`
- **Метод:** `POST`
- **Описание:** Создает новую награду.
- **Параметры запроса:**
    - `name` (string, обязательный): Название награды.
    - `description` (string, обязательный): Описание награды.
    - `price` (integer, обязательный): Цена награды в баллах.
    - `quantity` (integer, обязательный): Количество доступных наград.
- **Тело запроса (JSON):**

    ```json
    {
        "name": "Подарочная карта",
        "description": "Подарочная карта на 500 баллов.",
        "price": 500,
        "quantity": 10
    }
    ```

- **Ответ:**
    - **Успех (201 Created):**

        ```json
        {
            "id": 1,
            "name": "Подарочная карта",
            "description": "Подарочная карта на 500 баллов.",
            "price": 500,
            "quantity": 10,
            "is_active": true,
            "createdAt": "2025-01-04T16:00:00.000Z",
            "updatedAt": "2025-01-04T16:00:00.000Z"
        }
        ```

    - **Ошибка (400 Bad Request):**

        ```json
        {
            "error": "Все поля обязательны и должны быть заполнены."
        }
        ```

#### 2. Получение списка наград

- **URL:** `/rewards`
- **Метод:** `GET`
- **Описание:** Возвращает список всех наград. Можно фильтровать по активности.
- **Параметры запроса:**
    - `is_active` (boolean, необязательный): Фильтр по активности (`true` или `false`).
- **Пример запроса:**

    ```
    GET /rewards?is_active=true
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        [
            {
                "id": 1,
                "name": "Подарочная карта",
                "description": "Подарочная карта на 500 баллов.",
                "price": 500,
                "quantity": 10,
                "is_active": true,
                "createdAt": "2025-01-04T16:00:00.000Z",
                "updatedAt": "2025-01-04T16:00:00.000Z"
            },
            {
                "id": 2,
                "name": "Сертификат",
                "description": "Сертификат на участие в мастер-классе.",
                "price": 300,
                "quantity": 5,
                "is_active": true,
                "createdAt": "2025-01-05T11:00:00.000Z",
                "updatedAt": "2025-01-05T11:00:00.000Z"
            }
        ]
        ```

#### 3. Получение награды по ID

- **URL:** `/rewards/{id}`
- **Метод:** `GET`
- **Описание:** Возвращает информацию о награде по ее ID.
- **Параметры пути:**
    - `id` (integer, обязательный): ID награды.
- **Пример запроса:**

    ```
    GET /rewards/1
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "id": 1,
            "name": "Подарочная карта",
            "description": "Подарочная карта на 500 баллов.",
            "price": 500,
            "quantity": 10,
            "is_active": true,
            "createdAt": "2025-01-04T16:00:00.000Z",
            "updatedAt": "2025-01-04T16:00:00.000Z"
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Награда с ID 1 не найдена."
        }
        ```

#### 4. Обновление награды

- **URL:** `/rewards/{id}`
- **Метод:** `PUT`
- **Описание:** Обновляет информацию о награде.
- **Параметры пути:**
    - `id` (integer, обязательный): ID награды.
- **Параметры запроса:**
    - `name` (string, необязательный): Новое название награды.
    - `description` (string, необязательный): Новое описание.
    - `price` (integer, необязательный): Новая цена.
    - `quantity` (integer, необязательный): Новое количество.
    - `is_active` (boolean, необязательный): Статус активности награды.
- **Тело запроса (JSON):**

    ```json
    {
        "price": 600,
        "quantity": 8,
        "is_active": false
    }
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "id": 1,
            "name": "Подарочная карта",
            "description": "Подарочная карта на 500 баллов.",
            "price": 600,
            "quantity": 8,
            "is_active": false,
            "createdAt": "2025-01-04T16:00:00.000Z",
            "updatedAt": "2025-01-06T08:00:00.000Z"
        }
        ```

    - **Ошибка (400 Bad Request):**

        ```json
        {
            "error": "Поле 'price' должно быть числом."
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Награда с ID 1 не найдена."
        }
        ```

#### 5. Удаление награды

- **URL:** `/rewards/{id}`
- **Метод:** `DELETE`
- **Описание:** Удаляет награду по ее ID.
- **Параметры пути:**
    - `id` (integer, обязательный): ID награды.
- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "message": "Награда с ID 1 успешно удалена."
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Награда с ID 1 не найдена."
        }
        ```

---

### История (History)

#### 1. Получение истории транзакций

- **URL:** `/history`
- **Метод:** `GET`
- **Описание:** Возвращает список всех транзакций (например, запросов на покупку, одобрений и отклонений).
- **Параметры запроса:**
    - `student_id` (integer, необязательный): Фильтр по ID ученика.
    - `teacher_id` (integer, необязательный): Фильтр по ID учителя (администратора).
    - `type` (string, необязательный): Тип транзакции (`purchase_request`, `purchase`, `purchase_rejected`).
    - `date_from` (date, необязательный): Начальная дата.
    - `date_to` (date, необязательный): Конечная дата.
- **Пример запроса:**

    ```
    GET /history?type=purchase
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        [
            {
                "id": 1,
                "student_id": 1,
                "teacher_id": 2,
                "item_id": 3,
                "quantity": 1,
                "points": 500,
                "type": "purchase",
                "reason": "Покупка товара: Подарочная карта x1",
                "createdAt": "2025-01-04T17:00:00.000Z",
                "updatedAt": "2025-01-04T17:30:00.000Z",
                "User": {
                    "id": 1,
                    "telegram_id": 123456789,
                    "full_name": "Иван Иванов",
                    "role": "student",
                    "class_id": 1,
                    "total_points": 100,
                    "createdAt": "2025-01-04T12:00:00.000Z",
                    "updatedAt": "2025-01-04T17:30:00.000Z"
                }
            }
        ]
        ```

#### 2. Получение транзакции по ID

- **URL:** `/history/{id}`
- **Метод:** `GET`
- **Описание:** Возвращает информацию о транзакции по ее ID.
- **Параметры пути:**
    - `id` (integer, обязательный): ID транзакции.
- **Пример запроса:**

    ```
    GET /history/1
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "id": 1,
            "student_id": 1,
            "teacher_id": 2,
            "item_id": 3,
            "quantity": 1,
            "points": 500,
            "type": "purchase",
            "reason": "Покупка товара: Подарочная карта x1",
            "createdAt": "2025-01-04T17:00:00.000Z",
            "updatedAt": "2025-01-04T17:30:00.000Z",
            "User": {
                "id": 1,
                "telegram_id": 123456789,
                "full_name": "Иван Иванов",
                "role": "student",
                "class_id": 1,
                "total_points": 100,
                "createdAt": "2025-01-04T12:00:00.000Z",
                "updatedAt": "2025-01-04T17:30:00.000Z"
            }
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Транзакция с ID 1 не найдена."
        }
        ```

---

### Магазин (Store)

#### 1. Создание товара в магазине

- **URL:** `/store/items`
- **Метод:** `POST`
- **Описание:** Создает новый товар в магазине.
- **Параметры запроса:**
    - `name` (string, обязательный): Название товара.
    - `description` (string, обязательный): Описание товара.
    - `price` (integer, обязательный): Цена товара в баллах.
    - `quantity` (integer, обязательный): Количество доступных единиц товара.
    - `is_active` (boolean, необязательный): Статус доступности товара (по умолчанию `true`).
- **Тело запроса (JSON):**

    ```json
    {
        "name": "Подарочная карта",
        "description": "Подарочная карта на 500 баллов.",
        "price": 500,
        "quantity": 10,
        "is_active": true
    }
    ```

- **Ответ:**
    - **Успех (201 Created):**

        ```json
        {
            "id": 1,
            "name": "Подарочная карта",
            "description": "Подарочная карта на 500 баллов.",
            "price": 500,
            "quantity": 10,
            "is_active": true,
            "createdAt": "2025-01-04T18:00:00.000Z",
            "updatedAt": "2025-01-04T18:00:00.000Z"
        }
        ```

    - **Ошибка (400 Bad Request):**

        ```json
        {
            "error": "Все поля обязательны и должны быть заполнены."
        }
        ```

#### 2. Получение списка товаров

- **URL:** `/store/items`
- **Метод:** `GET`
- **Описание:** Возвращает список всех товаров в магазине. Можно фильтровать по активности.
- **Параметры запроса:**
    - `is_active` (boolean, необязательный): Фильтр по доступности (`true` или `false`).
- **Пример запроса:**

    ```
    GET /store/items?is_active=true
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        [
            {
                "id": 1,
                "name": "Подарочная карта",
                "description": "Подарочная карта на 500 баллов.",
                "price": 500,
                "quantity": 10,
                "is_active": true,
                "createdAt": "2025-01-04T18:00:00.000Z",
                "updatedAt": "2025-01-04T18:00:00.000Z"
            },
            {
                "id": 2,
                "name": "Сертификат",
                "description": "Сертификат на участие в мастер-классе.",
                "price": 300,
                "quantity": 5,
                "is_active": true,
                "createdAt": "2025-01-05T12:00:00.000Z",
                "updatedAt": "2025-01-05T12:00:00.000Z"
            }
        ]
        ```

#### 3. Получение товара по ID

- **URL:** `/store/items/{id}`
- **Метод:** `GET`
- **Описание:** Возвращает информацию о товаре по его ID.
- **Параметры пути:**
    - `id` (integer, обязательный): ID товара.
- **Пример запроса:**

    ```
    GET /store/items/1
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "id": 1,
            "name": "Подарочная карта",
            "description": "Подарочная карта на 500 баллов.",
            "price": 500,
            "quantity": 10,
            "is_active": true,
            "createdAt": "2025-01-04T18:00:00.000Z",
            "updatedAt": "2025-01-04T18:00:00.000Z"
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Товар с ID 1 не найден."
        }
        ```

#### 4. Обновление товара

- **URL:** `/store/items/{id}`
- **Метод:** `PUT`
- **Описание:** Обновляет информацию о товаре.
- **Параметры пути:**
    - `id` (integer, обязательный): ID товара.
- **Параметры запроса:**
    - `name` (string, необязательный): Новое название товара.
    - `description` (string, необязательный): Новое описание.
    - `price` (integer, необязательный): Новая цена.
    - `quantity` (integer, необязательный): Новое количество.
    - `is_active` (boolean, необязательный): Статус доступности товара.
- **Тело запроса (JSON):**

    ```json
    {
        "price": 600,
        "quantity": 8,
        "is_active": false
    }
    ```

- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "id": 1,
            "name": "Подарочная карта",
            "description": "Подарочная карта на 500 баллов.",
            "price": 600,
            "quantity": 8,
            "is_active": false,
            "createdAt": "2025-01-04T18:00:00.000Z",
            "updatedAt": "2025-01-06T07:00:00.000Z"
        }
        ```

    - **Ошибка (400 Bad Request):**

        ```json
        {
            "error": "Поле 'price' должно быть числом."
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Товар с ID 1 не найден."
        }
        ```

#### 5. Удаление товара

- **URL:** `/store/items/{id}`
- **Метод:** `DELETE`
- **Описание:** Удаляет товар по его ID.
- **Параметры пути:**
    - `id` (integer, обязательный): ID товара.
- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "message": "Товар с ID 1 успешно удален."
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Товар с ID 1 не найден."
        }
        ```

#### 6. Покупка товара

- **URL:** `/store/purchase`
- **Метод:** `POST`
- **Описание:** Позволяет ученику приобрести товар из магазина.
- **Тело запроса (JSON):**

    ```json
    {
        "student_id": 1,
        "item_id": 3,
        "quantity": 1
    }
    ```

- **Заголовки:**
    - `Authorization: Bearer <JWT_Token>`
- **Ответ:**
    - **Успех (200 OK):**

        ```json
        {
            "message": "Покупка успешно оформлена и ожидает одобрения администратора."
        }
        ```

    - **Ошибка (400 Bad Request):**

        ```json
        {
            "error": "Недостаточно баллов для покупки."
        }
        ```

    - **Ошибка (404 Not Found):**

        ```json
        {
            "error": "Товар с ID 3 не найден."
        }
        ```

    - **Ошибка (401 Unauthorized):**

        ```json
        {
            "error": "Требуется аутентификация."
        }
        ```

---

## Ошибки

API использует стандартные HTTP статус-коды для обозначения результатов запросов:

- `200 OK` — Запрос выполнен успешно.
- `201 Created` — Ресурс успешно создан.
- `400 Bad Request` — Некорректный запрос (например, отсутствуют обязательные поля).
- `401 Unauthorized` — Отсутствует или неверный токен аутентификации.
- `403 Forbidden` — Доступ запрещен (нет прав на выполнение действия).
- `404 Not Found` — Ресурс не найден.
- `500 Internal Server Error` — Внутренняя ошибка сервера.

**Пример ответа при ошибке:**

```json
{
    "error": "Пользователь с ID 1 не найден."
}
```

---

## Примеры Запросов и Ответов

### Пример 1: Добавление нового ученика через API

**Запрос:**

```
POST /users
Content-Type: application/json
Authorization: Bearer <JWT_Token>
```

**Тело запроса:**

```json
{
    "telegram_id": 1122334455,
    "full_name": "Анна Смирнова",
    "role": "student",
    "class_id": 2
}
```

**Ответ:**

```json
{
    "id": 3,
    "telegram_id": 1122334455,
    "full_name": "Анна Смирнова",
    "role": "student",
    "class_id": 2,
    "total_points": 0,
    "createdAt": "2025-01-07T09:00:00.000Z",
    "updatedAt": "2025-01-07T09:00:00.000Z"
}
```

### Пример 2: Получение списка всех учеников

**Запрос:**

```
GET /users?role=student
Authorization: Bearer <JWT_Token>
```

**Ответ:**

```json
[
    {
        "id": 1,
        "telegram_id": 123456789,
        "full_name": "Иван Иванов",
        "role": "student",
        "class_id": 1,
        "total_points": 150,
        "createdAt": "2025-01-04T12:00:00.000Z",
        "updatedAt": "2025-01-04T14:00:00.000Z"
    },
    {
        "id": 3,
        "telegram_id": 1122334455,
        "full_name": "Анна Смирнова",
        "role": "student",
        "class_id": 2,
        "total_points": 0,
        "createdAt": "2025-01-07T09:00:00.000Z",
        "updatedAt": "2025-01-07T09:00:00.000Z"
    }
]
```

### Пример 3: Обновление информации о классе

**Запрос:**

```
PUT /classes/2
Content-Type: application/json
Authorization: Bearer <JWT_Token>
```

**Тело запроса:**

```json
{
    "name": "6-Б"
}
```

**Ответ:**

```json
{
    "id": 2,
    "name": "6-Б",
    "createdAt": "2025-01-05T10:00:00.000Z",
    "updatedAt": "2025-01-07T10:00:00.000Z"
}
```

### Пример 4: Покупка товара учеником

**Запрос:**

```
POST /store/purchase
Content-Type: application/json
Authorization: Bearer <JWT_Token>
```

**Тело запроса:**

```json
{
    "student_id": 1,
    "item_id": 1,
    "quantity": 1
}
```

**Ответ:**

```json
{
    "message": "Покупка успешно оформлена и ожидает одобрения администратора."
}
```

---

## Рекомендации

1. **Используйте OpenAPI/Swagger для генерации интерактивной документации:**
   - Это упростит тестирование API и взаимодействие с ним для разработчиков.
   - Инструменты, такие как [Swagger UI](https://swagger.io/tools/swagger-ui/) или [Redoc](https://github.com/Redocly/redoc), могут быть интегрированы в ваш проект.

2. **Внедрите систему ролей и прав доступа:**
   - Убедитесь, что только авторизованные пользователи с соответствующими ролями могут выполнять определенные действия.
   - Например, только администраторы могут создавать или удалять классы и пользователей.

3. **Используйте валидацию данных:**
   - Применяйте библиотеки, такие как [Joi](https://joi.dev/) или [express-validator](https://express-validator.github.io/docs/), для валидации входящих данных на сервере.
   - Это повысит безопасность и надежность вашего API.

4. **Логирование и мониторинг:**
   - Реализуйте систему логирования (например, с использованием [winston](https://github.com/winstonjs/winston)) для отслеживания запросов, ошибок и другой важной информации.
   - Это поможет в быстром выявлении и устранении проблем.

5. **Тестирование:**
   - Напишите модульные и интеграционные тесты для вашего API с использованием инструментов, таких как [Jest](https://jestjs.io/) или [Mocha](https://mochajs.org/).
   - Это обеспечит стабильность и корректность работы вашего API при внесении изменений.

6. **Безопасность:**
   - Храните секретные ключи и конфиденциальные данные в переменных окружения и никогда не включайте их в кодовую базу.
   - Рассмотрите возможность использования HTTPS для всех запросов к API.

7. **Документируйте процесс аутентификации:**
   - Опишите, как получать JWT токены (например, через отдельный эндпоинт `/auth/login`), если он не описан выше.

---

## Заключение

Данная документация предоставляет полный обзор вашего RESTful API, включая основные ресурсы, методы, параметры и примеры запросов и ответов. Следуя этой документации, вы сможете разработать административную панель и интерфейс для учителей, обеспечивая эффективное взаимодействие с системой управления баллами.

Если у вас возникнут дополнительные вопросы или потребуется помощь с реализацией конкретных аспектов API, пожалуйста, дайте знать!
